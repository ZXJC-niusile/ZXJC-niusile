name: GitHub-Profile-3D-Contrib

on:
  schedule: # æ¯å¤©åŒ—äº¬æ—¶é—´ 08:00 è¿è¡Œä¸€æ¬¡
    - cron: "0 0 * * *"
  workflow_dispatch: # å…è®¸æ‰‹åŠ¨è¿è¡Œ

jobs:
  build:
    runs-on: ubuntu-latest
    name: generate-github-profile-3d-contrib
    
    permissions: 
      contents: write
      
    steps:
      - uses: actions/checkout@v3

      # ğŸ‘‡ğŸ‘‡ğŸ‘‡ æ–°å¢æ­¥éª¤ï¼šå…ˆç”Ÿæˆé…ç½®æ–‡ä»¶ ğŸ‘‡ğŸ‘‡ğŸ‘‡
      - name: Create Config File
        run: |
          echo '{
            "backgroundColor": "#1f2040",
            "foregroundColor": "#F2E6F1",
            "strongColor": "#bf91f3",
            "weakColor": "#4a4b70",
            "radarColor": "#bf91f3",
            "growingAnimation": true
          }' > profile-3d-config.json

      # ğŸ‘‡ğŸ‘‡ğŸ‘‡ ä¿®æ”¹æ­¥éª¤ï¼šè¯»å–åˆšæ‰ç”Ÿæˆçš„æ–‡ä»¶ ğŸ‘‡ğŸ‘‡ğŸ‘‡
      - uses: yoshi389111/github-profile-3d-contrib@0.7.1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          USERNAME: ${{ github.repository_owner }}
          # è¿™é‡Œå¡«çš„æ˜¯æ–‡ä»¶åï¼Œè€Œä¸æ˜¯ä»£ç äº†
          SETTING_JSON: profile-3d-config.json
      
      - name: Commit & Push
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git add -A .
          # å¦‚æœæœ‰å˜åŒ–æ‰æäº¤
          git diff --quiet && git diff --staged --quiet || (git commit -m "generated custom 3d graph" && git push)
